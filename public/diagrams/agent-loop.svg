<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 280" fill="none">
  <style>
    text { font-family: 'Source Sans 3', 'Source Sans Pro', system-ui, sans-serif; }
    .box-title { font-size: 16px; font-weight: 700; font-family: 'Lato', 'Source Sans 3', system-ui, sans-serif; letter-spacing: -0.02em; }
    .box-desc { font-size: 13px; }
    .loop-label { font-size: 14px; font-weight: 600; }
  </style>

  <!-- Outer loop container -->
  <rect x="16" y="16" width="648" height="248" rx="16" fill="var(--bg-secondary)" stroke="var(--border)" stroke-width="1" stroke-dasharray="8,4" opacity="0.6"/>

  <!-- Context Window box -->
  <rect x="64" y="56" width="150" height="80" rx="12" fill="rgba(0,112,203,0.1)" stroke="rgba(0,112,203,0.4)" stroke-width="1.5"/>
  <text x="139" y="90" text-anchor="middle" class="box-title" fill="var(--heading)">Context</text>
  <text x="139" y="108" text-anchor="middle" class="box-desc" fill="var(--text-muted)">window</text>

  <!-- Arrow: Context -> LLM -->
  <line x1="218" y1="96" x2="250" y2="96" stroke="var(--accent)" stroke-width="2"/>
  <polygon points="250,90 262,96 250,102" fill="var(--accent)"/>

  <!-- LLM box -->
  <rect x="265" y="56" width="150" height="80" rx="12" fill="rgba(40,200,64,0.1)" stroke="rgba(40,200,64,0.4)" stroke-width="1.5"/>
  <text x="340" y="84" text-anchor="middle" class="box-title" fill="var(--heading)">LLM</text>
  <text x="340" y="102" text-anchor="middle" class="box-desc" fill="var(--text-muted)">decide next</text>
  <text x="340" y="118" text-anchor="middle" class="box-desc" fill="var(--text-muted)">action</text>

  <!-- Arrow: LLM -> Tool -->
  <line x1="419" y1="96" x2="451" y2="96" stroke="var(--accent)" stroke-width="2"/>
  <polygon points="451,90 463,96 451,102" fill="var(--accent)"/>

  <!-- Tool Call box -->
  <rect x="466" y="56" width="150" height="80" rx="12" fill="rgba(239,156,3,0.1)" stroke="rgba(239,156,3,0.4)" stroke-width="1.5"/>
  <text x="541" y="84" text-anchor="middle" class="box-title" fill="var(--heading)">Tool Call</text>
  <text x="541" y="102" text-anchor="middle" class="box-desc" fill="var(--text-muted)">execute</text>
  <text x="541" y="118" text-anchor="middle" class="box-desc" fill="var(--text-muted)">action</text>

  <!-- Return arrow: Tool -> Context (going down and back) -->
  <path d="M541,140 L541,188 L139,188 L139,148" stroke="var(--accent)" stroke-width="2" fill="none"/>
  <polygon points="133,148 139,136 145,148" fill="var(--accent)"/>

  <!-- Label on return arrow -->
  <text x="340" y="212" text-anchor="middle" class="loop-label" fill="var(--text-muted)">result feeds back into context</text>

  <!-- Loop label -->
  <text x="340" y="240" text-anchor="middle" class="loop-label" fill="var(--accent)">Repeat until "done"</text>
</svg>
